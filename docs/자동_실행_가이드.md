# 🚀 서버 자동 실행 가이드

**작성일**: 2025년 1월  
**목적**: 서버를 항상 실행 상태로 유지하는 방법

---

## 📋 개요

이 가이드에서는 개발 서버를 항상 실행 상태로 유지하는 방법을 설명합니다.

---

## 🎯 방법 1: Windows 시작 프로그램에 등록 (권장)

### 설치 방법

1. **자동 실행 설치 스크립트 실행**
   ```bash
   install-auto-start.bat
   ```

2. **설치 완료**
   - Windows 시작 프로그램 폴더에 바로가기가 생성됩니다
   - 컴퓨터 부팅 시 자동으로 서버가 시작됩니다

### 제거 방법

1. **Windows 시작 프로그램 폴더 열기**
   - `Win + R` 키 누르기
   - `shell:startup` 입력 후 Enter

2. **바로가기 삭제**
   - `Auto-Start-Servers.lnk` 삭제
   - `Auto-Start-Servers-Runner.bat` 삭제

---

## 🔄 방법 2: 자동 재시작 스크립트 사용

### 사용 방법

1. **자동 재시작 스크립트 실행**
   ```bash
   auto-start-servers.bat
   ```

2. **동작 방식**
   - 30초마다 서버 상태를 확인
   - 서버가 종료되면 자동으로 재시작
   - Ctrl+C로 모니터링 중지

### 특징

- ✅ 서버가 종료되면 자동 재시작
- ✅ 포트 충돌 방지 (이미 실행 중이면 건너뜀)
- ✅ 백그라운드에서 실행 가능

---

## 🛑 서버 종료 방법

### 모든 서버 종료

```bash
stop-all-servers.bat
```

이 스크립트는 다음 서버들을 모두 종료합니다:
- API Server (포트 3001)
- Python HTTP Server (포트 3002)
- Vite Dev Server (포트 5173)
- Node.js MCP Server

---

## 📝 스크립트 설명

### `auto-start-servers.bat`
- 서버 상태를 주기적으로 확인하고 자동으로 재시작
- 30초마다 체크
- 서버가 종료되면 자동으로 시작

### `install-auto-start.bat`
- Windows 시작 프로그램에 자동 실행 등록
- 컴퓨터 부팅 시 자동으로 서버 시작
- 관리자 권한 필요할 수 있음

### `stop-all-servers.bat`
- 모든 서버를 안전하게 종료
- 포트를 사용하는 프로세스 종료

---

## ⚙️ 고급 설정

### 포트 변경 시

`auto-start-servers.bat` 파일을 열어 포트 번호를 수정하세요:

```batch
REM Check if API Server is running
netstat -ano | findstr :3001 >nul 2>&1
```

### 체크 간격 변경

`auto-start-servers.bat` 파일에서 대기 시간을 변경하세요:

```batch
REM Wait 30 seconds before checking again
timeout /t 30 /nobreak >nul
```

---

## 🖥️ VDI 환경에서의 자동 실행

### VDI 재부팅 시 자동 시작

**VDI (Virtual Desktop Infrastructure)** 환경에서 재부팅 시 서버가 자동으로 시작되도록 설정할 수 있습니다.

#### 설정 방법

1. **자동 실행 설치 스크립트 실행**
   ```bash
   install-auto-start.bat
   ```

2. **VDI 재부팅 후 확인**
   - VDI 재부팅 후 자동으로 서버가 시작됩니다
   - 작업 표시줄에서 서버 창이 자동으로 열립니다
   - "autostarting?" 메시지가 나타날 수 있습니다 (정상 동작)

#### 동작 확인

재부팅 후 다음을 확인하세요:

1. **서버 실행 확인**
   ```bash
   netstat -ano | findstr ":3001 :3002 :5173"
   ```

2. **웹 브라우저 접속**
   ```
   http://localhost:5173
   ```

3. **서버 창 확인**
   - 작업 표시줄에서 최소화된 서버 창 확인
   - 각 서버가 정상적으로 실행 중인지 확인

#### ⚠️ 중요: 자동 실행과 수동 실행의 중복 방지

**VDI 재부팅 시 자동 실행이 설정되어 있는 경우:**

- ✅ **자동 실행이 활성화되어 있으면 `start-dev.bat`를 수동으로 실행할 필요가 없습니다**
- ✅ `auto-start-servers.bat`가 이미 서버를 시작하고 있습니다
- ✅ 두 스크립트 모두 포트 체크를 하므로 중복 실행은 방지되지만, 불필요한 실행은 피하는 것이 좋습니다

**확인 방법:**

1. **자동 실행이 활성화되어 있는지 확인**
   ```bash
   # Windows 시작 프로그램 폴더 확인
   # Win + R → shell:startup 입력
   # Auto-Start-Servers.lnk 파일이 있는지 확인
   ```

2. **서버가 이미 실행 중인지 확인**
   ```bash
   netstat -ano | findstr ":3001 :3002 :5173"
   ```

3. **서버가 실행 중이면 `start-dev.bat` 실행 불필요**
   - 자동 실행이 정상 작동 중이면 별도로 `start-dev.bat`를 실행할 필요가 없습니다
   - 서버가 실행 중이지 않은 경우에만 `start-dev.bat`를 실행하세요

**권장 사항:**

- VDI 환경에서는 `install-auto-start.bat`를 한 번만 실행하여 자동 실행을 설정하세요
- 재부팅 후 서버가 자동으로 시작되므로 `start-dev.bat`를 수동으로 실행할 필요가 없습니다
- 서버 상태를 확인하려면 포트 체크 명령어를 사용하세요

#### 주의사항

- VDI 환경에서는 사용자별로 설정이 저장됩니다
- 재부팅 시 자동 시작이 되지 않으면 `install-auto-start.bat`를 다시 실행하세요
- 관리자 권한이 필요한 경우가 있을 수 있습니다
- **자동 실행이 활성화되어 있으면 `start-dev.bat`를 중복 실행하지 마세요**

---

## 🔍 문제 해결

### 서버가 자동으로 시작되지 않는 경우

1. **포트 확인**
   ```bash
   netstat -ano | findstr ":3001 :3002 :5173"
   ```

2. **수동 시작**
   ```bash
   start-dev.bat
   ```

3. **로그 확인**
   - 각 서버 창에서 에러 메시지 확인

### 시작 프로그램이 작동하지 않는 경우

1. **관리자 권한으로 실행**
   - `install-auto-start.bat`를 우클릭 → "관리자 권한으로 실행"

2. **수동 등록**
   - Windows 시작 프로그램 폴더에 직접 바로가기 생성

### VDI 재부팅 후 "autostarting?" 메시지가 나타나는 경우

**이것은 정상적인 동작입니다!**

- `auto-start-servers.bat` 스크립트가 실행되면서 나타나는 메시지입니다
- 서버가 자동으로 시작되고 있다는 의미입니다
- 별도의 조치가 필요하지 않습니다
- 서버가 정상적으로 시작되면 메시지가 사라집니다

---

## 📚 관련 문서

- [`README.md`](../README.md) - 프로젝트 개요
- [`프로젝트_완전_가이드.md`](../프로젝트_완전_가이드.md) - 프로젝트 완전 가이드

---

**마지막 업데이트**: 2025년 1월

